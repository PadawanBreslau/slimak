class Add<%= (column_name + "_to_" + file_name.pluralize).camelize %> < ActiveRecord::Migration[<%= migration_version %>]
  def change
    add_column :<%= file_name.pluralize %>, :<%= column_name %>, :string
    add_index  :<%= file_name.pluralize %>, :<%= column_name %>, unique: true
<% if scope_name.present? -%>
    # Scoped uniqueness: composite unique index on [<%= scope_name %>, :<%= column_name %>]
    add_index :<%= file_name.pluralize %>, [:<%= scope_name %>, :<%= column_name %>], unique: true, name: "index_<%= file_name.pluralize %>_on_<%= scope_name %>_and_<%= column_name %>"
<% end -%>
  end
end
